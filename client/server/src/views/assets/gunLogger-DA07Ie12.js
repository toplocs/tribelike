import{r as n}from"./index-BxM6jP3R.js";class c{events=[];maxEvents=100;enabled=!1;filterTypes;silentMode=!1;constructor(){const e=new URLSearchParams(location.search);if(this.enabled=e.has("debug")||!1,!this.enabled)return;const o=e.get("debug");if(o==="silent")this.silentMode=!0,e.has("quiet")||console.log("%cðŸ”« Gun Logger Activated (silent mode)","color: #4CAF50; font-weight: bold");else if(o&&o!=="true"){const t=o.toLowerCase().split(",");this.filterTypes=t,console.log(`%cðŸ”« Gun Logger Activated (filtering: ${t.join(", ")})`,"color: #4CAF50; font-weight: bold")}else console.log("%cðŸ”« Gun Logger Activated","color: #4CAF50; font-weight: bold");this.interceptGunMethods(),this.logPeerActivity(),window.gunLog=this,window.gunStats=()=>this.printStats(),window.gunRecent=t=>this.showRecent(t),window.gunClear=()=>this.clear(),window.gunGraph=()=>this.showGraph(),window.gunStorage=()=>this.showStorage(),window.gunWatch=t=>this.watch(t),window.gun=n}interceptGunMethods(){const e=n.get.bind(n),o=n.put.bind(n);n.get=(...i)=>(this.log("GET",i[0],{timestamp:Date.now()}),e(...i)),n.put=(...i)=>{const l=i[0],r=typeof l=="object"&&l?Object.keys(l)[0]:"data";return this.log("PUT",r,{timestamp:Date.now(),size:JSON.stringify(l).length}),o(...i)};const t=Object.getPrototypeOf(n),s=t.on;t.on=function(...i){const l=this._.get||"unknown";return window.gunLog?.log("SUBSCRIBE",l,{timestamp:Date.now()}),s.apply(this,i)}}logPeerActivity(){setTimeout(()=>{const e=n.back("opt.peers");e&&Object.entries(e).forEach(([o,t])=>{const s=t.wire&&t.wire.readyState===1;this.log("PEER",o,{status:s?"connected":"disconnected",readyState:t.wire?.readyState})})},1e3)}log(e,o,t){if(!this.enabled||this.filterTypes&&!this.filterTypes.includes(e.toLowerCase()))return;const s={type:e,path:o,meta:t,time:new Date().toISOString(),timestamp:Date.now()};if(this.events.unshift(s),this.events.length>this.maxEvents&&(this.events=this.events.slice(0,this.maxEvents)),!this.silentMode){const l={GET:"color: #4CAF50; font-weight: bold",PUT:"color: #2196F3; font-weight: bold",PEER:"color: #FF9800; font-weight: bold",SUBSCRIBE:"color: #9C27B0; font-weight: bold",ERROR:"color: #F44336; font-weight: bold"}[e]||"color: #9E9E9E";console.log(`%c[Gun.${e}] %c${o}`,l,"color: #666",t)}}getEvents(){return this.events}clear(){this.events=[],console.log("%cðŸ—‘ï¸  Gun Log Cleared","color: #FF5722")}getStats(){const e=Object.keys(n._.graph||{}).length,o=n.back("opt.peers")||{},t=Object.values(o).filter(s=>s.wire&&s.wire.readyState===1).length;return{graphSize:e,totalPeers:Object.keys(o).length,connectedPeers:t,events:this.events.length,memory:performance.memory?.usedJSHeapSize||0}}printStats(){const e=this.getStats();console.group("%cðŸ“Š Gun Stats","color: #00BCD4; font-weight: bold"),console.log(`Graph Nodes: ${e.graphSize}`),console.log(`Connected Peers: ${e.connectedPeers}/${e.totalPeers}`),console.log(`Logged Events: ${e.events}`),console.log(`Memory: ${(e.memory/1024/1024).toFixed(2)} MB`),console.groupEnd()}showRecent(e=10){console.group("%cðŸ“œ Recent Gun Activity","color: #795548; font-weight: bold"),this.events.slice(0,e).forEach(o=>{const t=Date.now()-o.timestamp,s=t<1e3?"just now":`${Math.floor(t/1e3)}s ago`;console.log(`[${o.type}] ${o.path} - ${s}`)}),console.groupEnd()}showGraph(){const e=n._.graph||{};return console.group("%cðŸŒ Gun Graph","color: #009688; font-weight: bold"),console.log(`Total nodes: ${Object.keys(e).length}`),console.log("Graph:",e),console.groupEnd(),e}showStorage(){console.group("%cðŸ’¾ Gun Storage","color: #FF5722; font-weight: bold");const e=Object.keys(localStorage).filter(o=>o.startsWith("gun/")||o==="radata");console.log(`Gun keys in localStorage: ${e.length}`),e.forEach(o=>{const t=localStorage.getItem(o);console.log(`${o}: ${t?.substring(0,100)}${t&&t.length>100?"...":""}`)}),console.groupEnd()}watch(e){console.log(`%cðŸ‘ï¸  Watching: ${e}`,"color: #E91E63; font-weight: bold"),n.get(e).on((o,t)=>{console.log(`%c[WATCH] ${e}`,"color: #E91E63; font-weight: bold",{key:t,data:o,timestamp:Date.now()})})}}const h=new c;export{h as default};
